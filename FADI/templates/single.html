<!-- wp:template-part {"slug":"header","tagName":"header"} /-->

<!-- wp:group {"tagName":"main","style":{"spacing":{"padding":{"top":"var:preset|spacing|50","bottom":"var:preset|spacing|50"}}},"layout":{"type":"constrained"}} -->
<main class="wp-block-group" style="padding-top:var(--wp--preset--spacing--50);padding-bottom:var(--wp--preset--spacing--50)">
    
    <!-- wp:group {"align":"wide","layout":{"type":"default"}} -->
    <div class="wp-block-group alignwide">
        
        <!-- معلومات المقال -->
        <!-- wp:group {"style":{"spacing":{"margin":{"bottom":"var:preset|spacing|40"},"padding":{"all":"var:preset|spacing|30"}},"color":{"background":"#fff"}},"className":"post-header","layout":{"type":"default"}} -->
        <div class="wp-block-group post-header has-background" style="background-color:#fff;margin-bottom:var(--wp--preset--spacing--40);padding:var(--wp--preset--spacing--30)">
            
            <!-- wp:post-title {"level":1,"style":{"typography":{"fontSize":"2.2rem","fontWeight":"700"},"color":{"text":"#333"},"spacing":{"margin":{"bottom":"var:preset|spacing|20"}}}} /-->
            
            <!-- معلومات المقال -->
            <!-- wp:group {"style":{"spacing":{"padding":{"all":"var:preset|spacing|15"}},"color":{"background":"#f8f9fa"}},"layout":{"type":"flex","flexWrap":"wrap","justifyContent":"space-between"}} -->
            <div class="wp-block-group has-background" style="background-color:#f8f9fa;padding:var(--wp--preset--spacing--15)">
                
                <!-- wp:group {"layout":{"type":"flex","flexWrap":"nowrap"}} -->
                <div class="wp-block-group">
                    
                    <!-- wp:paragraph {"style":{"typography":{"fontSize":"0.9rem"},"color":{"text":"#666"}}} -->
                    <p style="color:#666;font-size:0.9rem">📅 <?php echo get_the_date('Y-m-d'); ?></p>
                    <!-- /wp:paragraph -->
                    
                    <!-- wp:paragraph {"style":{"typography":{"fontSize":"0.9rem"},"color":{"text":"#666"}}} -->
                    <p style="color:#666;font-size:0.9rem">🕒 <?php echo get_the_time('H:i'); ?></p>
                    <!-- /wp:paragraph -->
                    
                    <!-- wp:paragraph {"style":{"typography":{"fontSize":"0.9rem"},"color":{"text":"#666"}}} -->
                    <p style="color:#666;font-size:0.9rem">👤 <?php echo get_the_author(); ?></p>
                    <!-- /wp:paragraph -->
                    
                </div>
                <!-- /wp:group -->
                
                <?php if (is_user_logged_in()): ?>
                <!-- wp:group {"layout":{"type":"flex","flexWrap":"nowrap"}} -->
                <div class="wp-block-group">
                    
                    <!-- wp:paragraph {"style":{"typography":{"fontSize":"0.9rem"},"color":{"text":"#666"}}} -->
                    <p style="color:#666;font-size:0.9rem">✏️ <a href="<?php echo get_edit_post_link(); ?>">تعديل</a></p>
                    <!-- /wp:paragraph -->
                    
                    <!-- wp:paragraph {"style":{"typography":{"fontSize":"0.9rem"},"color":{"text":"#666"}}} -->
                    <p style="color:#666;font-size:0.9rem">📊 <a href="#post-stats">الإحصائيات</a></p>
                    <!-- /wp:paragraph -->
                    
                </div>
                <!-- /wp:group -->
                <?php endif; ?>
                
            </div>
            <!-- /wp:group -->
            
            <!-- الصورة المميزة -->
            <!-- wp:post-featured-image {"style":{"spacing":{"margin":{"top":"var:preset|spacing|20"}}}} /-->
            
        </div>
        <!-- /wp:group -->
        
        <!-- محتوى المقال -->
        <!-- wp:group {"style":{"spacing":{"padding":{"all":"var:preset|spacing|40"}},"color":{"background":"#fff"}},"className":"post-content","layout":{"type":"default"}} -->
        <div class="wp-block-group post-content has-background" style="background-color:#fff;padding:var(--wp--preset--spacing--40)">
            
            <!-- wp:post-content {"layout":{"type":"constrained"}} /-->
            
        </div>
        <!-- /wp:group -->
        
        <!-- التصنيفات والوسوم -->
        <!-- wp:group {"style":{"spacing":{"margin":{"top":"var:preset|spacing|30"},"padding":{"all":"var:preset|spacing|20"}},"color":{"background":"#f8f9fa"}},"layout":{"type":"default"}} -->
        <div class="wp-block-group has-background" style="background-color:#f8f9fa;margin-top:var(--wp--preset--spacing--30);padding:var(--wp--preset--spacing--20)">
            
            <!-- wp:group {"layout":{"type":"flex","flexWrap":"wrap","justifyContent":"space-between"}} -->
            <div class="wp-block-group">
                
                <!-- wp:post-terms {"term":"category","style":{"typography":{"fontSize":"0.9rem"}}} /-->
                
                <!-- wp:post-terms {"term":"post_tag","style":{"typography":{"fontSize":"0.9rem"}}} /-->
                
            </div>
            <!-- /wp:group -->
            
        </div>
        <!-- /wp:group -->
        
        <!-- إحصائيات المقال للمستخدمين المسجلين -->
        <?php if (is_user_logged_in()): ?>
        
        <!-- wp:group {"style":{"spacing":{"margin":{"top":"var:preset|spacing|40"},"padding":{"all":"var:preset|spacing|20"}},"color":{"background":"#e0f2fe","text":"#0369a1"}},"className":"post-stats","layout":{"type":"default"}} -->
        <div class="wp-block-group post-stats has-text-color has-background" style="color:#0369a1;background-color:#e0f2fe;margin-top:var(--wp--preset--spacing--40);padding:var(--wp--preset--spacing--20)" id="post-stats">
            
            <!-- wp:heading {"level":4,"style":{"color":{"text":"#0369a1"},"typography":{"fontSize":"1rem","fontWeight":"600"}}} -->
            <h4 style="color:#0369a1;font-size:1rem;font-weight:600">📊 إحصائيات المقال</h4>
            <!-- /wp:heading -->
            
            <!-- wp:columns -->
            <div class="wp-block-columns">
                
                <!-- wp:column -->
                <div class="wp-block-column">
                    <p><strong>عدد الكلمات:</strong> <?php echo str_word_count(get_the_content()); ?></p>
                </div>
                <!-- /wp:column -->
                
                <!-- wp:column -->
                <div class="wp-block-column">
                    <p><strong>وقت القراءة المتوقع:</strong> <?php echo ceil(str_word_count(get_the_content()) / 200); ?> دقيقة</p>
                </div>
                <!-- /wp:column -->
                
                <!-- wp:column -->
                <div class="wp-block-column">
                    <p><strong>آخر تحديث:</strong> <?php echo get_the_modified_date('Y-m-d H:i'); ?></p>
                </div>
                <!-- /wp:column -->
                
            </div>
            <!-- /wp:columns -->
            
        </div>
        <!-- /wp:group -->
        
        <?php endif; ?>
        
        <!-- أزرار التنقل -->
        <!-- wp:group {"style":{"spacing":{"margin":{"top":"var:preset|spacing|40"}}},"layout":{"type":"default"}} -->
        <div class="wp-block-group" style="margin-top:var(--wp--preset--spacing--40)">
            
            <!-- wp:buttons {"layout":{"type":"flex","justifyContent":"center"}} -->
            <div class="wp-block-buttons">
                
                <!-- wp:button {"backgroundColor":"primary","textColor":"white","style":{"border":{"radius":"5px"}}} -->
                <div class="wp-block-button">
                    <a class="wp-block-button__link has-white-color has-primary-background-color has-text-color has-background wp-element-button" href="/dashboard/" style="border-radius:5px">🏠 لوحة التحكم</a>
                </div>
                <!-- /wp:button -->
                
                <!-- wp:button {"backgroundColor":"secondary","textColor":"white","style":{"border":{"radius":"5px"}}} -->
                <div class="wp-block-button">
                    <a class="wp-block-button__link has-white-color has-secondary-background-color has-text-color has-background wp-element-button" href="#" onclick="window.print(); return false;" style="border-radius:5px">🖨️ طباعة</a>
                </div>
                <!-- /wp:button -->
                
                <?php if (is_user_logged_in()): ?>
                <!-- wp:button {"backgroundColor":"tertiary","textColor":"white","style":{"border":{"radius":"5px"}}} -->
                <div class="wp-block-button">
                    <a class="wp-block-button__link has-white-color has-tertiary-background-color has-text-color has-background wp-element-button" href="<?php echo get_edit_post_link(); ?>" style="border-radius:5px">✏️ تعديل</a>
                </div>
                <!-- /wp:button -->
                <?php endif; ?>
                
            </div>
            <!-- /wp:buttons -->
            
        </div>
        <!-- /wp:group -->
        
        <!-- التنقل بين المقالات -->
        <!-- wp:group {"style":{"spacing":{"margin":{"top":"var:preset|spacing|40"},"padding":{"all":"var:preset|spacing|20"}},"color":{"background":"#fff"}},"layout":{"type":"default"}} -->
        <div class="wp-block-group has-background" style="background-color:#fff;margin-top:var(--wp--preset--spacing--40);padding:var(--wp--preset--spacing--20)">
            
            <!-- wp:group {"layout":{"type":"flex","flexWrap":"nowrap","justifyContent":"space-between"}} -->
            <div class="wp-block-group">
                
                <?php 
                $prev_post = get_previous_post();
                $next_post = get_next_post();
                ?>
                
                <?php if ($prev_post): ?>
                <!-- wp:paragraph {"style":{"typography":{"fontSize":"0.9rem"}}} -->
                <p style="font-size:0.9rem">
                    ⬅️ <a href="<?php echo get_permalink($prev_post); ?>">المقال السابق: <?php echo get_the_title($prev_post); ?></a>
                </p>
                <!-- /wp:paragraph -->
                <?php endif; ?>
                
                <?php if ($next_post): ?>
                <!-- wp:paragraph {"style":{"typography":{"fontSize":"0.9rem"}}} -->
                <p style="font-size:0.9rem">
                    <a href="<?php echo get_permalink($next_post); ?>">المقال التالي: <?php echo get_the_title($next_post); ?></a> ➡️
                </p>
                <!-- /wp:paragraph -->
                <?php endif; ?>
                
            </div>
            <!-- /wp:group -->
            
        </div>
        <!-- /wp:group -->
        
    </div>
    <!-- /wp:group -->
    
</main>

<!-- wp:template-part {"slug":"footer","tagName":"footer"} /-->

<!-- تحسينات CSS إضافية للمقالات -->
<style>
.post-header,
.post-content {
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

.post-content h1, .post-content h2, .post-content h3 {
    color: #333;
    margin-bottom: 1rem;
    margin-top: 2rem;
}

.post-content h1:first-child,
.post-content h2:first-child,
.post-content h3:first-child {
    margin-top: 0;
}

.post-content p {
    line-height: 1.8;
    margin-bottom: 1.2rem;
}

.post-content a {
    color: #667eea;
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color 0.3s ease;
}

.post-content a:hover {
    border-bottom-color: #667eea;
}

.post-content blockquote {
    border-right: 4px solid #667eea;
    padding-right: 20px;
    margin: 20px 0;
    font-style: italic;
    color: #666;
}

.post-content code {
    background: #f8f9fa;
    padding: 2px 6px;
    border-radius: 3px;
    font-family: 'Courier New', monospace;
}

.post-content pre {
    background: #f8f9fa;
    padding: 15px;
    border-radius: 5px;
    overflow-x: auto;
    direction: ltr;
    text-align: left;
}

/* تحسين الطباعة */
@media print {
    .wp-block-buttons,
    .post-stats {
        display: none !important;
    }
    
    .post-header,
    .post-content {
        box-shadow: none;
        border: 1px solid #ddd;
    }
}

/* تحسين للشاشات الصغيرة */
@media (max-width: 768px) {
    .post-content {
        padding: 20px !important;
    }
    
    .wp-block-buttons {
        flex-direction: column;
        align-items: center;
    }
    
    .wp-block-button {
        width: 100%;
        max-width: 250px;
        margin-bottom: 10px;
    }
}
</style>